<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title >truelytell!!!</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
	   <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
<link rel="stylesheet" 
          href=
"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>

        .input-icons i {
            position: absolute;
        }
          
        .input-icons {
            width: 100%;
            margin-bottom: 10px;
        }
          
        .icon {
            padding: 10px;
            min-width: 40px;
        }
          
        .input-field {
            width: 100%;
            padding: 10px;
            text-align: center;
        }
		
		#example1 {
  /* border: 1px solid; */
  padding: 10px;
  /* box-shadow: 5px 10px 8px 10px #888888; */
			box-shadow: 5px 10px 8px 10px #888888;
}
		img {
  /* border: 1px solid #ddd; */
  border-radius: 4px;
  padding: 5px;
  width: 50px;
}
		
		
		
/* width */
::-webkit-scrollbar {
  width: 10px;
}

/* Track */
::-webkit-scrollbar-track {
  box-shadow: inset 0 0 3px grey; 
  border-radius: 10px;
}
 
/* Handle */
::-webkit-scrollbar-thumb {
  background: grey; 
  border-radius: 10px;
}

/* Handle on hover */
::-webkit-scrollbar-thumb:hover {
  /* background: #b30000;  */
	background: darkgrey;
}

		div.ex3 {
  /* background-color: lightblue; */
  /* width: 100%; */
width:300px
  height: 450px;
  overflow: auto;
}

		/* body{
			background-color: white;
		}
		 */
		
		.edit_hover_class button{
  visibility:hidden;
}
.edit_hover_class:hover button {
 visibility:visible;
}
		
		
		
    </style>
	
	
</head>

<body class="d-flex flex-column vh-100 conatiner" style="overflow: hidden;overflow-y: hidden;
  overflow-x: hidden;" >
	
	
	<nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark">
		
  <div class="container-fluid">
    <a class="navbar-brand" href="#" style="font-size:2em">truelytell</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
	  
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="navbar-nav">

        <a class="nav-link m-1"style="font-size:1.2em" href="/" >Home</a>

		  <div class="dropdow" >
  <button class="btn btn-dark dropdown-toggle" type="button" id="dropdownMenu2" data-bs-toggle="dropdown" aria-expanded="false">
	  <a href='#' style="text-decoration: none;color:white;font-size: 40px" class="fad fa-envelope-square "></a>
  </button>
  <ul class="dropdown-menu" style="background-color:#2E2E2E;border-style: none;max-height: 500px; overflow-y: scroll;" aria-labelledby="dropdownMenu2">
	  
	  <%if(user.requests==0){%>
	  
	  
	  <div class="card m-5" style="width: 18rem;box-shadow: 2px 4px 2px 4px #999999;margin:20px">
		  <div class="card-body">
			  <div class="card-text">
				  
				  <h5 class="card-title">
					  no request!!!
				  </h5>
				 
			  </div>
			  
		  </div><!--done-->
		  
	  </div>  

	  
	  <%}%>
	  
	  
	  <% for(let req of user.requests){%>
	  <div class="card m-5" style="width: 18rem;box-shadow: 2px 4px 2px 4px #999999">
		  <div class="card-body">
			  <div class="card-text">
				  <form action="/movies/<%=community._id%>/request/<%=req._id%>?_method=DELETE" method="POST">
					  <div class="d-flex justify-content-end">
						  <button class="fas fa-trash-alt" style="text-decoration: none;color:red;border-style: none;background-color:white"></button>
					  </div>
				  </form>
				  <h5 class="card-title">
					  <li>
						  <button class="dropdown-item" type="button">
							  movie:<%=req.title%>
						  </button>
					  </li>
				  </h5>
				  <% for(let comId of comm){%>
	  <!-- <li><button class="dropdown-item" type="button"><%=comId._id%>:<%=req.group%></button></li> -->
				  <% if(req.group.equals( comId._id)){%>
				  <li>
					  <button class="dropdown-item" type="button">
						  Community:<%=comId.title%>
					  </button>
				  </li>
				  <%}%>
				  <%}%>
				  <% for(let uId of users){%>
	  <!-- <li><button class="dropdown-item" type="button"><%=uId.username%>:<%=req%></button></li> -->
				  <% if(req.author.equals(uId._id)){%>
				  <li>
					  <button class="dropdown-item" type="button">
						  Requested by:<%=uId.username%>
					  </button>
				  </li>
				  <%}%>
				  <%}%>
			  </div>
			  <div class="d-flex justify-content-end">
				  <a class="btn btn-sm btn-success" href="/movies/new/<%=community._id%>" class="card-link">Give Review</a>
	  			</div><!--done-->
		  </div><!--done-->
		  
	  </div>  
    <!-- <li><button class="dropdown-item" type="button">Something else here</button></li> -->
	  <%}%>
			  </ul>
		  </div>
		  <!-- <div style="max-width:400px;margin:auto">
        <div class="input-icons">
            <i class="fa fa-user icon"></i>
            <input class="input-field" type="text">
            <i class="fa fa-instagram icon"></i>
            <input class="input-field" type="text">
        </div> -->
  </div>
		 <!-- <a class="nav-link" href="/register">Register</a> -->
		<!-- <a class="nav-link" href="/login">Login</a> -->
		  <!-- <a class="nav-link" href="/register">Register</a>
		  <a class="nav-link" href="/login">Login</a>
		  <a class="nav-link" href="/logout">Logout</a> -->
      </div>
    </div>
 
		<div class="collapse navbar-collapse " id="navbarNavAltMarkup">
		  <!-- ml-auto still works just fine-->
		  <div class="navbar-nav ml-auto">
			   <form class="d-flex" action="/movies/<%=community._id%>/search" method="POST">	  
			  <div class="input-icons d-flex justify-content-end">
				  <i class="fas fa-search" style="padding:10px;font-size:1.5em"></i>
			  <input class="form-control me-2" type="search" style="width:500px" name="title" placeholder="Search Movie Name" aria-label="Search">
			  
        </div>

			  <!-- <button type="button" class="btn btn-outline-light" type="submit" style="border-width: 3px;" >Search</button> -->
		  </form>

			  
			<!-- <a class="nav-link active" aria-current="page" href="/login">login</a> -->
			<!-- <a class="nav-link active" aria-current="page" href="/register">register</a> -->
			<a class="nav-link active" aria-current="page" href="/logout">logout</a>
			<!-- <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a> -->
			</div>
		</div>
</nav>

	<main >

		<div class="row" style="top:0;
								left:0;
    							bottom:0;
								position:fixed;
    							overflow-y:scroll;
								overflow-x:hidden;
								padding-top:10px;
								margin-top:64.5px;
								margin-left:0px;
								height:650px">
			<div class="col-md-3" style="color:white;background-color:#2E2E2E;width:18%;height:100%">
				<div >
					<h4>
						All movies
					</h4>
					<a href="/movies/new/<%=community._id%>" type="button" class="btn-sm btn-warning"  style="text-decoration:none">new Movie</a>
					<a href="/movies/request/<%=community._id%>" type="button" class="btn-sm btn-warning" style="text-decoration:none">Request</a>
					<a type="button" href="/movies/<%=community._id%>"  class="btn-sm btn-warning" style="text-decoration:none">All Movies</a>
					<h4>Members</h4>
					<p>
						</p>
					<div class="ex3" style="width:1500px">
						<img src="https://cdn4.iconfinder.com/data/icons/small-n-flat/24/user-alt-512.png" style="background-color:white">
						<%=community.author.username.split("@")[0]%>
						<p>
						</p>
					
						
						<% for(let frnd of community.users){%>	
						<div class="edit_hover_class">
							<img src="https://cdn4.iconfinder.com/data/icons/small-n-flat/24/user-alt-512.png">
							<%=frnd.username.split("@")[0]%>
							
				
								
						
							<span class=" m-2 p-1 " >
									<% if(community.author.equals(userr._id)){%>
								<form class="d-inline" action="/movies/<%=community._id%>/<%=frnd._id%>?_method=DELETE" method="POST">
									<button type="submit" class="fal fa-trash-alt flex" style="color:red;font-size:1.3em;background-color:#2E2E2E"></button>
									</form>
								<%}%>
							</span>
								
						</div>

						<%}%>
					</div>
				</div>
			</div>
			<div class="col-md-9" style="background: linear-gradient(to right, #f7797d, #FBD786, #C6FFDD);">
				<marquee behavior="alternate" direction = "right" style="color:black" ><h5>
					
					--Request for a review or share a review in "<%=community.title%>"community--</h5></marquee>
				<div style="float:right; width:100%; height:563px; overflow:auto; overflow-x: hidden;width:80%;">
					<%let check=1%>
					<%if(community.moviePosts.length==0){check=0;%>
						<div class="card"  id="example1" style="box-shadow: 2px 4px 2px 4px #999999;margin:20px" >
							<div class="row">
								<div class="col-md-3">
									
								</div>
							<div class="col-md-6">
								<div class="card-body">
									<center>
										<h5 class="card-title">
											No posts yet,add your first post!!!
										</h5>
									</center>	
								</div>
							</div>
						</div>
							<!-- <br> -->
						<!-- </div> -->
					<%}%>
				
					<% for(let movie of community.moviePosts){%>
					
					<%if(movies.length==0){check=0;%>
					<div class="card"  id="example1" style="box-shadow: 2px 4px 2px 4px #999999;margin:20px" >
							<div class="row">
								<div class="col-md-3">
									
								</div>
							<div class="col-md-6">
								<div class="card-body">
									<center>
									<h5 class="card-title">
										No movies available
									</h5></center>
									
									
									
								</div>
							</div>
						</div>
							<br>
						</div>
					<%break;}%>
						<% for(let m of movies){%>	
						<% if(m._id.equals(movie._id)){%>
						<div class="card"  id="example1" style="box-shadow: 2px 4px 2px 4px #999999;margin:20px" >
							<div class="row">
								<div class="col-md-3">
									<center>
										<img class="img-fluid" src='<%=movie.image.url%>' alt=image style=" border-radius: 2px;padding: 5px;width: 80%;box-shadow: 1px 2px 1px 2px #999999;">
									</center>
								</div>
							<div class="col-md-9">
								<div class="card-body">
									<h5 class="card-title">
										<%=movie.name %>
									</h5>
									<p class="card-text">
										<%var str = movie.review%>
										<%if(str.length > 10) str = str.substring(0,250);%>
										<%=str%>.........
									</p>
									<a class="btn" style="background-color:#2E2E2E;color:white" href="/movies/post/<%=movie._id%>/<%=community._id%>" >Read more about <%=movie.name %></a>
								</div>
							</div>
						</div>
							<br>
						</div>
					
				<%}%>	
				<%}%>	
				<%}%>	
				</div>
			</div>
		</div>
		</div>
		
	</main>

	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
    
	
	<%- include('../partials/footer')%>
	<script>

(function () {
  'use strict'

  // Fetch all the forms we want to apply custom Bootstrap validation styles to
  var forms = document.querySelectorAll('.validated-form')

  // Loop over them and prevent submission
  Array.from(forms) //-new version           // Array.prototype.slice.call(forms) - older version
    .forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }

        form.classList.add('was-validated')
      }, false)
    })
})()

	
</script>
	
	
	
</body>
</html>












	
