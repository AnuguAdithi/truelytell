<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title >truelytell!!!</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
	
	
		<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	
	
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css" integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I" crossorigin="anonymous">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
	
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	
	
	
	<style>
	body {
    background: #333;
    color: #ddd;
}

@media (min-width: 768px) {
    .multi-item-carousel .carousel-inner .carousel-item {
        margin-right: inherit;
    }

    .multi-item-carousel .carousel-inner .carousel-item.active + .carousel-item,
    .multi-item-carousel .carousel-inner .carousel-item.active + .carousel-item + .carousel-item {
        display: block;
    }

    .multi-item-carousel .carousel-inner .carousel-item.active:not(.carousel-item-right):not(.carousel-item-left),
    .multi-item-carousel .carousel-inner .carousel-item.active:not(.carousel-item-right):not(.carousel-item-left) + .carousel-item,
    .multi-item-carousel .carousel-inner .carousel-item.active:not(.carousel-item-right):not(.carousel-item-left) + .carousel-item + .carousel-item {
        transition: none;
    }

    .multi-item-carousel .carousel-inner .carousel-item.active + .carousel-item + .carousel-item + .carousel-item {
        position: absolute;
        top: 0;
        right: -33.33333333%;
        z-index: -1;
        display: block;
        visibility: visible;
    }

    .multi-item-carousel .carousel-inner .carousel-item-next,
    .multi-item-carousel .carousel-inner .carousel-item-prev {
        position: relative;
        transform: translate3d(0, 0, 0);
    }

	.multi-item-carousel .carousel-inner .carousel-item-prev1.carousel-item-right,
    .multi-item-carousel .carousel-inner .carousel-item-prev.carousel-item-right {
        position: absolute;
        top: 0;
        left: 0;
        z-index: -1;
        display: block;
        visibility: visible;
    }

    .multi-item-carousel .active.carousel-item-left + .carousel-item-next.carousel-item-left,
    .multi-item-carousel .carousel-item-next.carousel-item-left + .carousel-item,
    .multi-item-carousel .carousel-item-next.carousel-item-left + .carousel-item + .carousel-item,
    .multi-item-carousel .carousel-item-next.carousel-item-left + .carousel-item + .carousel-item + .carousel-item {
        position: relative;
        transform: translate3d(-100%, 0, 0);
        visibility: visible;
    }


    .multi-item-carousel .active.carousel-item-right + .carousel-item-prev.carousel-item-right,
    .multi-item-carousel .carousel-item-prev.carousel-item-right + .carousel-item,
    .multi-item-carousel .carousel-item-prev.carousel-item-right + .carousel-item + .carousel-item,
    .multi-item-carousel .carousel-item-prev.carousel-item-right + .carousel-item + .carousel-item + .carousel-item {
        position: relative;
        transform: translate3d(100%, 0, 0);
        display: block;
        visibility: visible;
    }
}
		

	</style>
	<script>
	$(".multi-item-carousel").on("slide.bs.carousel", function (e) {
    let $e = $(e.relatedTarget),
        itemsPerSlide = 3,
        totalItems = $(".carousel-item", this).length,
        $itemsContainer = $(".carousel-inner", this),
        it = itemsPerSlide - (totalItems - $e.index());
    if (it > 0) {
        for (var i = 0; i < it; i++) {
            $(".carousel-item", this)
                .eq(e.direction == "left" ? i : 0)
                .appendTo($itemsContainer);
        }
    }
});
	</script>
	
	<!-- generating random colors -->

</head>

<body class="d-flex flex-column vh-100">
	
	<nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark" style="font-size:1.15em;color:white">
  <div class="container-fluid">
    <!-- <a class="navbar-brand" href="#" style="font-size:1.35em;font-family: 'Lobster', cursive;padding:2px" >truelytell</a> -->
	   <a class="navbar-brand" href="#" style="font-size:2em">truelytell</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="navbar-nav">
        <a class="nav-link" href="/join" class="float-right"  >Join-Comunity</a>
        <a class="nav-link" href="/create" class="float-right">Create-Comunity</a>
		 <!-- <a class="nav-link" href="/register">Register</a> -->
		<!-- <a class="nav-link" href="/login">Login</a> -->
		  
<!-- <div class="w3-bar w3-black"> -->
  
<!-- </div> -->
      </div>
    </div>
	  <!-- <div  id="navbarNavDarkDropdown" style="float:right">
				<ul class="navbar-nav">
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDarkDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
							Dropdown
						</a>
						<ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDarkDropdownMenuLink">
							<li><a class="dropdown-item" href="#">Action</a></li>
							<li><a class="dropdown-item" href="#">Another action</a></li>
            				<li><a class="dropdown-item" href="#">Something else here</a></li>
          				</ul>
        			</li>
      			</ul>
    		</div> -->
	 
		  <a class="nav-link" href="/logout" style="color:white">Logout</a>
  </div>
		
</nav>

	<br>
	<br>
	<center>
		<h1>
			Welcome <%=user.username.split("@")[0]%>!!!!
		</h1>
		<marquee behavior="alternate" direction = "right" ><h5>
			
			Request for a review or share a review by joining a community or creating a community!!!
			</h5></marquee>
		
		
	</center>
	<center>
	<h3>
		
		<h3>
		COMMUNITIES!!!
	</h3>
		</h3></center>
	
	<br>
	<br>
	
	 <div class="container">
        <div class="carousel slide multi-item-carousel" id="theCarousel">
            <div class="carousel-inner row w-100 mx-auto">

                
				<%const colorArray = ["#CCCCFF","#DAF7A6", "#FFA07A","#40E0D0"] %>
				<% let count=0%>
				<%let num=0%>
				
				<% for(let com of community){%>
				<% if( (com.author._id.equals(user._id))){%>
				<% c = colorArray[count]%>
				<% count==3? count=0 : count=count+1%>
				
				<%if(num==0){%>
				<div class="carousel-item active col-md-4">
					<div class="row card-deck">
						<div style="color:blue;">
							<div class="col-12  m-1.5">
								<div class="card text-dark mb-3" style="max-width: 18rem;background-color:<%=c%>">
									<div class="card-header" style="text-align:center; font-size:1.5em">
										<b>Title: <%=com.title%></b>
										<span class="d-flex justify-content-end">
											<form action="/community/<%=com._id%>/<%=user._id%>?_method=DELETE" method="POST">
												<button class="btn btn-sm btn-warning m-1">
													Leave
												</button>
											</form>
											<form action="/community/<%=com._id%>?_method=DELETE" method="POST">
													<button class="btn btn-sm btn-danger">
														Delete
													</button>
												</form>
										</span>
									</div>
									<div class="card-body">
										<h5 class="card-title">Admin: <%=user.username.split("@")[0]%>
										</h5>
										<div class="middle">
											<div class="card-body">
												<a type="button" href="/movies/<%=com._id%>" class="btn btn-dark">Go To Movies</a>
											</div>
											<div class="card-body">
												<a type="button" href="/books" class="btn btn-dark">Go To Books</a>
											</div>

										</div>

									</div>

								</div>
							</div>
						</div>
					</div>
				</div>	
				<%num=1%>
				<%}else{%>
					<div class="carousel-item col-md-4">
						<div class="row card-deck">
							<div style="color:blue;">
								<div class="col-12  m-1.5">
									<div class="card text-dark mb-3" style="max-width: 18rem;background-color:<%=c%>">
										<div class="card-header" style="text-align:center; font-size:1.5em">
											<b>Title: <%=com.title%></b>
											<span class="d-flex justify-content-end">
												<form action="/community/<%=com._id%>/<%=user._id%>?_method=DELETE" method="POST">
													<button class="btn btn-sm btn-warning m-1">
														Leave
													</button>
												</form>
												<form action="/community/<%=com._id%>?_method=DELETE" method="POST">
													<button class="btn btn-sm btn-danger">
														Delete
													</button>
												</form>
											</span>
										</div>
										<div class="card-body">
											<h5 class="card-title">Admin: <%=user.username.split("@")[0]%>
											</h5>
											<div class="middle">
												<div class="card-body">
													<a type="button" href="/movies/<%=com._id%>" class="btn btn-dark">Go To Movies</a>
												</div>
												<div class="card-body">
													<a type="button" href="/books" class="btn btn-dark">Go To Books</a>
												</div>

											</div>

										</div>

									</div>
								</div>
							</div>
						</div>
					</div>
				
				<% }%>
				<% }%>
				<% }%>
				<% for(let com of community){%>
				<% for(let userId of com.users){%>
				
				<% if( (userId.equals(user._id))){%>
				<% c = colorArray[count]%>
				<% count==3? count=0 : count=count+1%>
		
				<%if(num==0){%>
				<%num=1%>
				<div class="carousel-item active col-md-4">
						<div class="row card-deck">
							<div style="color:blue;">
								<div class="col-12  m-1.5">
									<div class="card text-dark mb-3" style="max-width: 18rem;background-color:<%=c%>">
										<div class="card-header" style="text-align:center; font-size:1.5em">
											<b>Title: <%=com.title%></b>
											<span class="d-flex justify-content-end">
												<form action="/community/<%=com._id%>/<%=user._id%>?_method=DELETE" method="POST">
													<button class="btn btn-sm btn-warning m-1">
														Leave
													</button>
												</form>
											</span>
										</div>
										<div class="card-body">
											<h5 class="card-title">Admin: <%=user.username.split("@")[0]%>
											</h5>
											<div class="middle">
												<div class="card-body">
													<a type="button" href="/movies/<%=com._id%>" class="btn btn-dark">Go To Movies</a>
												</div>
												<div class="card-body">
													<a type="button" href="/books" class="btn btn-dark">Go To Books</a>
												</div>

											</div>

										</div>

									</div>
								</div>
							</div>
						</div>
					</div>
				<%}else{%>
				<div class="carousel-item col-md-4">
						<div class="row card-deck">
							<div style="color:blue;">
								<div class="col-12  m-1.5">
									<div class="card text-dark mb-3" style="max-width: 18rem;background-color:<%=c%>">
										<div class="card-header" style="text-align:center; font-size:1.5em">
											<b>Title: <%=com.title%></b>
											<span class="d-flex justify-content-end">
												<form action="/community/<%=com._id%>/<%=user._id%>?_method=DELETE" method="POST">
													<button class="btn btn-sm btn-warning m-1">
														Leave
													</button>
												</form>
											</span>
										</div>
										<div class="card-body">
											<h5 class="card-title">Admin: <%=com.author.username.split("@")[0]%>
											</h5>
											<div class="middle">
												<div class="card-body">
													<a type="button" href="/movies/<%=com._id%>" class="btn btn-dark">Go To Movies</a>
												</div>
												<div class="card-body">
													<a type="button" href="/books" class="btn btn-dark">Go To Books</a>
												</div>

											</div>

										</div>

									</div>
								</div>
							</div>
						</div>
					</div>
				<%}%>
				<%}%>
				<% }%>
    			<% }%>
				<%if(num==0){%>
				
<% c = colorArray[count]%>
				<% count==3? count=0 : count=count+1%>
				
				
					<div class="carousel-item active col-md-4">
						<div class="row card-deck">
							<div style="color:blue;">
								<div class="col-12 offset-11">
									<div class="card text-dark mb-3" style="max-width: 18rem;background-color:<%=c%>">
										
										<div class="card-body">
											No communities yet!!
										</div>

									</div>
								</div>
							</div>
						</div>
					</div>
				
				
				<%}%>
				
				
			</div>
			<a class="carousel-control-prev" href="#theCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#theCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>
	
	<br>
	<br>

	
	<!-- <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<div class="container-fluid">
			<div class="collapse navbar-collapse" id="navbarNavDarkDropdown">
				<ul class="navbar-nav">
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDarkDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
							Dropdown
						</a>
						<ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDarkDropdownMenuLink">
							<li><a class="dropdown-item" href="#">Action</a></li>
							<li><a class="dropdown-item" href="#">Another action</a></li>
            				<li><a class="dropdown-item" href="#">Something else here</a></li>
          				</ul>
        			</li>
      			</ul>
    		</div>
  		</div>
	</nav>
	
	 -->

<!-- 	
	<h2 style="text-align:center">
		Groups of <%=user.username%>
	</h2>
	<br>
	<br>
	
	<main class="container">
	<div class="container"> 
    <div class="row card-deck">
	<%var c=0%>
	<% for(let com of community){%>
	<% for(let userId of com.users){%>
		<% if( (userId.equals(user._id))){%>
		
        <div class="col-12 col-sm-3 m-1.5">
			   <div class="card text-dark bg-light mb-3" style="max-width: 15rem;">
			<div class="card-header" style="text-align:center; font-size:1.5em">
				<b>Title: <%=com.title%></b>
				<span class="d-flex justify-content-end">
						<form action="/community/<%=com._id%>/<%=user._id%>?_method=DELETE" method="POST">
							<button class="btn btn-sm btn-warning">
								Leave
							</button>
						</form>
					</span>
			</div>
			<div class="card-body">
				<h5 class="card-title">Admin: <%=com.author.username%></h5>
				<div class="card-body">
					<a type="button" href="/movies/<%=com._id%>"  class="btn btn-dark">Go To Movies</a>
				</div>
				<div class="card-body">
					<a type="button" href="/books"  class="btn btn-dark">Go To Books</a>
				</div>
			</div>
		</div>
        </div>
		<% }%>
	<% }%>
    <% }%>
		</div>
		</div>

		<br>
		<br>
		<h4>
			Created by you!!
		</h4>
		<br>
	<div class="container"> 
    <div class="row card-deck">
	<% for(let com of community){%>
		<% if( (com.author._id.equals(user._id))){%>
        <div class="col-12 col-sm-3 m-1.5">
			 <div class="card text-dark bg-light mb-3" style="max-width: 15rem;">
				<div class="card-header" style="text-align:center; font-size:1.5em">
					<b>Title: <%=com.title%></b>
					<span class="d-flex justify-content-end">
						<form action="/community/<%=com._id%>/<%=user._id%>?_method=DELETE" method="POST">
							<button class="btn btn-sm btn-warning m-1">
								Leave
							</button>
						</form>
						
						<form action="/community/<%=com._id%>?_method=DELETE" method="POST">
							<button class="btn btn-sm btn-danger">
								Delete
							</button>
						</form>
					</span>
				</div>
				<div class="card-body">
					<h5 class="card-title">Admin: <%=user.username%></h5>
					<div class="card-body">
						<a type="button" href="/movies/<%=com._id%>"  class="btn btn-dark">Go To Movies</a>
					</div>
					<div class="card-body">
						<a type="button" href="/books"  class="btn btn-dark">Go To Books</a>
					</div>
				</div>

			</div>
        </div>
		<% }%>
    <% }%>
</div>
</div>
	</main> -->

	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
    
	
	
	 <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	
	
	
	<%- include('partials/footer')%>
	<script>

(function () {
  'use strict'

  // Fetch all the forms we want to apply custom Bootstrap validation styles to
  var forms = document.querySelectorAll('.validated-form')

  // Loop over them and prevent submission
  Array.from(forms) //-new version           // Array.prototype.slice.call(forms) - older version
    .forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }

        form.classList.add('was-validated')
      }, false)
    })
})()

	
</script>
	
	
	
</body>
</html>